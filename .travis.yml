language: ruby
before_install:
- gem install asciidoctor tilt
script:
- git clone https://github.com/sethwoodworth/asciidoctor-htmlbook.git
- asciidoctor -a toc -b xhtml5 -d book -T ./asciidoctor-htmlbook/htmlbook-autogen/
  -d book Adventures-of-Huckleberry-Finn.asciidoc -o Adventures-of-Huckleberry-Finn.html
- git clone https://github.com/sethwoodworth/HTMLBook
- xsltproc -stringparam external.assets.list " " ./HTMLBook/htmlbook-xsl/epub.xsl
  Adventures-of-Huckleberry-Finn.html
- cp ./HTMLBook/stylesheets/epub/epub.css OEBPS
- cp cover.png OEBPS/cover.png
- zip -rX Adventures-of-Huckleberry-Finn.epub mimetype
- zip -rX Adventures-of-Huckleberry-Finn.epub OEBPS/ META-INF/
branches:
  only:
  - master
deploy:
  skip_cleanup: true
  provider: releases
  api_key:
    secure: "GjKtMp18+SRgzEycGnT7Q4ZHbHOG3AcHU9JTE7bMYG0djduzelDU+akBZzeQNHE9LGfsBy93np6VnR/DE+PSiRqdIMn6LD3TEkgOlkCK6k8m7sTt3kl5oVKH73yOreaDHTd4LJ/A/Lh/CIlPVB78BnMWlKv2afAwZXS9e/KOqOEMQvQJDdgukBbgLh8aKd3Zu6bN3OyAYgDt3BENiC6CyeTZEO7UDAp48Iw/KznWvgwMldoxT47rjZTR6pVXwHJKQELugD++CsQ0hois7BRo18/fiBu2M1LPp3uSb8YhA9QVg35+MnQ7jCHWWy8I3Q3XK3VraTcbU7UST+P0R5oRSuG65Gu0p/37CCtqhA8ZZdJaLnk43Q4EhxSjlwS9ijLgE9hLzj1UQ9Qxl4yi2bXodzncEJlGhhsG4izqlOl4kk/VhFq7/J83MYRmla2Q2z/pFeNZug9EQyR9N7fft+hjhLjiFYC4wSM10lfR3ipfLNNNbvTrZcIvioiSaailFp8MUoSL0MPcsGyxMp0QHQ1OPvh2uFQNo/QwBNAxE40drkh4jwcT3SPE+qp5GhEX6hR206XeWbDHh44G96qu8TIU9dBzdq+hQ/T0mVMpy5QtpNMuwF87EoVX1kRN+KgSzdTp5PITGqAcGuBY2M1HmNDgPqcBjV726IMkdHxZ635b4NY="  file: Adventures-of-Huckleberry-Finn.html.epub
  file: Adventures-of-Huckleberry-Finn.html.epub
  on:
    repo: rdhyee/Adventures-of-Huckleberry-Finn_76
addons:
  apt:
    packages:
    - xsltproc
